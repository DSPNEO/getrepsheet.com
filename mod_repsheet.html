<!DOCTYPE html>
<!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--><html lang="en"><!--<![endif]-->

  <head>
    <meta charset="utf-8">

    <title>Repsheet - ModRepsheet</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Repsheet">
    <meta name="author" content="Aaron Bedra">

    <!-- CSS Framework (Normalize + Skeleton) -->
    <link href="assets/css/framework.css" rel="stylesheet">

    <!-- Core CSS -->
    <link href="assets/css/typography.css" rel="stylesheet">
    <link href="assets/css/main.css" rel="stylesheet">
    <link href="assets/css/widgets.css" rel="stylesheet">
    <link href="assets/css/icons.css" rel="stylesheet">

    <!-- Theme Colors CSS -->
    <link href="assets/css/colors.css" rel="stylesheet">

    <!-- Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet">
    <link href="assets/css/fonts/glyphicons/style.css" rel="stylesheet">

    <!-- External Plugin CSS -->
    <link rel="stylesheet" href="assets/css/customizer.css">

    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
  </head>

  <body>
    <div id="main-wrapper" class="wide">
      <!-- Main Header -->
      <header id="main-header">
        <!-- Top Header -->
        <div id="header-top">
          <div class="container">
            <div class="sixteen columns">
              <!-- Logo Container -->
              <div id="logo-container">
                <div id="logo-center">
                  <a href="index.html"><h1>Repsheet</h1></a>
                </div>
              </div>
              <!-- END Logo Container -->
              <div class="tagline">Reputational Intelligence Engine</div>
              <!-- Main Navigation -->
              <nav id="main-nav">
                <ul>
                  <li><a href="index.html">Home</a></li>
                  <li><a href="downloads.html">Downloads</a></li>
                </ul>
              </nav>
              <!-- END Main Navigation -->
            </div>
          </div>
        </div>

        <!-- Bottom Header -->
        <div id="header-bottom">
          <div class="container">
            <div class="sixteen columns">
              <ul class="breadcrumb">
                <li><a href="index.html">Home</a> <span class="divider">/</span></li>
                <li class="active">ModRepsheet</li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <!-- END Main Header -->

      <!-- Main Content -->
      <section id="main-content">
        <div class="container">

          <!-- Page Header -->
          <div class="page-header">
            <h1>ModRepsheet <small>Setup and Installation</small></h1>
          </div>
          <!-- End Page Header -->

          <div class="row">
            <div class="sixteen columns">
              <p>
                This is designed to be a tutorial for setting up
                ModRepsheet. To learn more about how ModRepsheet
                works, you can
                visit <a href="https://github.com/repsheet/repsheet/blob/master/README.md">The
                  project's README page</a>
              </p>

              <ul class="nav nav-tabs">
                <li class="active"><a href="#tab-001" data-toggle="tab">Debian/Ubuntu</a></li>
                <li><a href="#tab-002" data-toggle="tab">RedHat/Fedora/CentOS</a></li>
                <li><a href="#tab-003" data-toggle="tab">From Source</a></li>
              </ul>

              <div class="tab-content">
                <div class="tab-pane active" id="tab-001">
                  <p>
                    This tutorial assumes that you are
                    running <a href="http://www.debian.org/releases/stable/">Debian
                      Wheezy</a>
                    or <a href="http://releases.ubuntu.com/precise/">Ubuntu
                      Precise Pangolin</a>. If you are running another
                    version, this information may not be accurate.
                  </p>

                  <div id="installation">
                    <h4>Installation</h4>
                    <p>
                      First, we need to install some dependencies:
                    </p>

                    <pre>$ sudo apt-get install apache2 libhiredis0.10 libapr1 redis-server</pre>

                    <p>
                      The redis-server dependency doesn't have to be
                      installed on the system you run ModRepsheet on,
                      but in this example we will just use one machine.
                      Next, download the latest version of
                      libapache2-mod-repsheet for you architecture. In
                      this example we will use the 64-bit package. Use
                      dpkg to install it.
                    </p>

                    <pre>$ curl -L -O https://github.com/repsheet/repsheet/releases/download/0.9/libapache2-mod-repsheet_0.9-1_amd64.deb
$ sudo dpkg -i libapache2-mod-repsheet_0.9-1_amd64.deb</pre>

                    <p>
                      Finally, enable the module and restart apache:
                    </p>

                    <pre>$ sudo a2enmod repsheet
$ sudo /etc/init.d/apache restart</pre>

                    <p>
                      To make sure everything loaded properly, take a
                      look at the apache error log for the Repsheet
                      initialization message
                    </p>

                    <pre>$ sudo tail -f /var/log/apache2/error.log
[Sat Jul 27 15:30:00 2013] [notice] Repsheet Version 0.9 Enabled</pre>

                    <p>
                      You can verify that ModRepsheet is enabled and
                      recording requests by using wget to fetch the
                      apache default page and look at the resulting
                      Redis modifications.
                    </p>

                    <pre>$ wget http://localhost

$ redis-cli keys "*"
1) "127.0.0.1:requests"

$ redis-cli lrange "127.0.0.1:requests" 0 -1
1) "7/27/2013 20:37:54.854480, Wget/1.13.4 (linux-gnu), GET, /, -"</pre>

		    <p>
		      The package adds an initial configuration file
		      at <strong><i>/etc/apache2/mods-available/repsheet.conf</i></strong>. Any
		      configuration changes should be made in this
		      file.
		    </p>

		    <pre>&lt;IfModule repsheet_module&gt;
  RepsheetEnabled On
  RepsheetRecorder On
  RepsheetFilter On
  RepsheetGeoIP Off
  RepsheetProxyHeaders On
  RepsheetAction Notify
  RepsheetPrefix [repsheet]
  RepsheetRedisTimeout 5
  RepsheetRedisHost localhost
  RepsheetRedisPort 6379
  RepsheetRedisMaxLength 1000
  RepsheetRedisExpiry 24
&lt;/IfModule&gt;</pre>
                  </div>
                </div>

                <div class="tab-pane" id="tab-002">
                  <p>
                    This tutorial assumes that you are running an RPM
                    based distribution such as <a href="http://www.redhat.com/">RedHat</a>, <a href="http://fedoraproject.org/">Fedora</a>, or
                    <a href="http://www.centos.org/">CentOS</a>. This tutorial has only been tested on
                    <a href="http://wiki.centos.org/Manuals/ReleaseNotes/CentOS6.4">CentOS
                    6</a>. If you are running another version, this
                    information may not be accurate.
                  </p>

                  <div id="installation">
                    <h4>Installation</h4>
                    <p>
                      First, we need to install some dependencies. In order to get everything we need, we will first have to install <a href="http://fedoraproject.org/wiki/EPEL">EPEL</a>.
                    </p>

                    <pre>$ wget http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
$ sudo rpm -Uvh epel-release-6*.rpm
$ sudo yum install httpd hiredis redis</pre>

                    <p>
                      The redis-server dependency doesn't have to be
                      installed on the system you run ModRepsheet on,
                      but in this example we will just use one machine.
                      Next, download the latest version of
                      libapache2-mod-repsheet for you architecture. In
                      this example we will use the 64-bit package. Use
                      dpkg to install it.
                    </p>

                    <pre>$ curl -L -O https://github.com/repsheet/repsheet/releases/download/0.9/mod_repsheet-0.9-1.x86_64.rpm
$ sudo rpm -Uvh mod_repsheet-0.9-1.x86_64.rpm</pre>

		    <p>
		      Next you need to tell Apache to load
		      ModRepsheet. Insert the following line at the
		      end of the LoadModule section in <strong><i>/etc/httpd/conf/httpd.conf</i></strong>:
		    </p>

		    <pre>LoadModule repsheet_module modules/mod_repsheet.so</pre>

		    <p>
		      By default, SELinux does not allow Apache to
		      make socket connections. If you don't enable
		      this, you will get a permission denied error
		      connecting to Redis and ModRepsheet will not
		      function properly. You can see the
		      details <a href="http://fedoraproject.org/wiki/SELinux/apache">here</a>
		    </p>

		    <pre>$ sudo /usr/sbin/setsebool httpd_can_network_connect=1</pre>
		    
                    <p>
                      Finally, start Redis and Apache:
                    </p>

                    <pre>$ sudo /etc/init.d/redis start
$ sudo /etc/init.d/httpd restart</pre>

                    <p>
                      To make sure everything loaded properly, take a
                      look at the apache error log for the Repsheet
                      initialization message
                    </p>

                    <pre>$ sudo tail -f /var/log/httpd/error.log
[Sat Jul 27 15:30:00 2013] [notice] Repsheet Version 0.9 Enabled</pre>

                    <p>
                      You can verify that ModRepsheet is enabled and
                      recording requests by using wget to fetch the
                      apache default page and look at the resulting
                      Redis modifications.
                    </p>

                    <pre>$ wget http://localhost

$ redis-cli keys "*"
1) "127.0.0.1:requests"

$ redis-cli lrange "127.0.0.1:requests" 0 -1
1) "7/27/2013 20:37:54.854480, Wget/1.13.4 (linux-gnu), GET, /, -"</pre>

		    <p>
		      The package adds an initial configuration file
		      at <strong><i>/etc/httpd/conf.d/00_mod_repsheet.conf</i></strong>. Any
		      configuration changes should be made in this
		      file.
		    </p>

		    <pre>&lt;IfModule repsheet_module&gt;
  RepsheetEnabled On
  RepsheetRecorder On
  RepsheetFilter On
  RepsheetGeoIP On
  RepsheetProxyHeaders On
  RepsheetAction Notify
  RepsheetPrefix [repsheet]
  RepsheetRedisTimeout 5
  RepsheetRedisHost localhost
  RepsheetRedisPort 6379
  RepsheetRedisMaxLength 1000
  RepsheetRedisExpiry 24
&lt;/IfModule&gt;</pre>
                  </div>
                </div>

                <div class="tab-pane" id="tab-003">
                  <p>
                    This tutorial assumes that you are running
                    an <a href="http://www.archlinux.org/">Arch
                    Linux</a>. Any Linux or Unix distribution with the
                    proper libraries and compiler should be able to
                    build ModRepsheet from source. If you are running
                    an RPM or Debian package based system, you should
                    follow those instructions, as the installation
                    will be much easier. You will have to adjust these
                    instructions for the package manager and library
                    choices of your distribution.
                  </p>

                  <div id="installation">
                    <h4>Installation</h4>
                    <p>
                      First, we need to install some dependencies:
                    </p>

                    <pre>$ sudo pacman -S apache check redis git
$ git clone git://github.com/redis/hiredis
$ cd hiredis
$ make
$ sudo make install PREFIX=/usr</pre>

                    <p>
                      The redis dependency doesn't have to be
                      installed on the system you run ModRepsheet on,
                      but in this example we will just use one machine.
                      Next, download the latest version of
                      ModRepsheet.
                    </p>

                    <pre>$ curl -L -O https://github.com/repsheet/repsheet/archive/0.9/0.9.tar.gz
$ tar xvzf 0.9.tar.gz
$ cd backend-0.9
$ ./autogen.sh
$ make
$ sudo make install</pre>

		    <p>
		      In order to enable ModRepsheet and activate its
		      features, we need to add the configuration
		      to <strong><i>/etc/httpd/conf/httpd.conf</i></strong>. Put
		      the following in the configuration file anywhere
		      after the LoadModule section
		    </p>

		    <pre>&lt;IfModule repsheet_module&gt;
  RepsheetEnabled On
  RepsheetRecorder On
  RepsheetFilter On
  RepsheetGeoIP On
  RepsheetProxyHeaders On
  RepsheetAction Notify
  RepsheetPrefix [repsheet]
  RepsheetRedisTimeout 5
  RepsheetRedisHost localhost
  RepsheetRedisPort 6379
  RepsheetRedisMaxLength 1000
  RepsheetRedisExpiry 24
&lt;/IfModule&gt;</pre>

                    <p>
                      Finally, start Redis and Apache:
                    </p>

                    <pre>$ sudo systemctl restart redis
$ sudo systemctl restart httpd</pre>

                    <p>
                      To make sure everything loaded properly, take a
                      look at the apache error log for the Repsheet
                      initialization message
                    </p>

                    <pre>$ sudo tail -f /var/log/httpd/error_log
[Sat Jul 27 15:30:00 2013] [notice] Repsheet Version 0.9 Enabled</pre>

                    <p>
                      You can verify that ModRepsheet is enabled and
                      recording requests by using wget to fetch the
                      apache default page and look at the resulting
                      Redis modifications.
                    </p>

                    <pre>$ curl 127.0.0.1

$ redis-cli keys "*"
1) "127.0.0.1:requests"

$ redis-cli lrange "127.0.0.1:requests" 0 -1
1) "7/27/2013 20:37:54.854480, curl/7.31.0, GET, /, -"</pre>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <footer id="footer">
        <!-- Top Footer -->
        <div id="footer-top">
          <div class="container">
            <div class="one-third column">
              <h3>About</h3>
              <p>
                Repsheet was designed and implemented
                by <a href="https://github.com/abedra">Aaron
                  Bedra</a>. The development efforts have been made
                possible in part
                by <a href="https://braintreepayments.com">Braintree
                  Payments</a>.
              </p>
            </div>
          </div>
        </div>
        <!-- END Top Footer -->

        <!-- Bottom Footer -->
        <div id="footer-bottom">
          <div class="container">
            <div class="eight columns">
              Copyright &copy; Aaron Bedra 2013. All Rights Reserved.
            </div>
            <div class="eight columns">
              <ul class="footer-nav">
                <li><a href="index.html">Home</a></li>
                <li><a href="downloads.html">Downloads</a></li>
              </ul>
            </div>
          </div>
        </div>
        <!-- END Bottom Footer -->
      </footer>
      <!-- END Footer -->
    </div>
    <script src="assets/js/jquery-1.9.1.min.js"></script>
    <script src="assets/js/joiee.plugins.js"></script>
  </body>
</html>
